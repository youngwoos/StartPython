<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Start Python</title>
    <meta charset="utf-8" />
    <meta name="author" content="김영우" />
    <script src="libs/header-attrs-2.7.1/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/tile-view-0.2.5.9000/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.5.9000/tile-view.js"></script>
    <link rel="stylesheet" href="css/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">







class: title0

쉽게 배우는 Python 데이터 분석 Part 2

---

class: no-page-num

### 김영우

&lt;img src='img/photo.jpg' style='width: 15%' /&gt;

#### &lt;https://facebook.com/groups/datacommunity&gt;
#### &lt;https://github.com/youngwoos&gt;
#### &lt;stats7445@gmail.com&gt;

---


### 목차

#### 4. 자유자재로 데이터 가공하기
- [조건에 맞는 데이터만 추출하기](#filter)
- [필요한 변수만 추출하기](#select)
- [순서대로 정렬하기](#arrange)
- [집단별로 요약하기](#groupby_summarise)

---





class: title0

자유자재로 데이터 가공하기

---

&lt;br&gt;

## .center[자유자재로 데이터 가공하기]

&lt;br&gt;
&lt;img src="img/preprocessing.png" width="600px" style="display: block; margin: auto;" /&gt;

---

#### 데이터 전처리(Preprocessing) - dplyr 패키지

.left[
&amp;nbsp; &amp;nbsp; 함수       |&amp;nbsp; 기능
-----------|-------
&amp;nbsp; &amp;nbsp; df[df['var'] == 1] &amp;nbsp; | &amp;nbsp; 행 추출&amp;nbsp; &amp;nbsp;
&amp;nbsp; &amp;nbsp; df['var']          &amp;nbsp; | &amp;nbsp; 열(변수) 추출&amp;nbsp; &amp;nbsp;
&amp;nbsp; &amp;nbsp; df.sort_values()   &amp;nbsp; | &amp;nbsp; 정렬&amp;nbsp; &amp;nbsp;
&amp;nbsp; &amp;nbsp; df.groupby()       &amp;nbsp; | &amp;nbsp; 집단별로 나누기&amp;nbsp; &amp;nbsp;
&amp;nbsp; &amp;nbsp; df.agg()           &amp;nbsp; | &amp;nbsp; 통계치 산출&amp;nbsp; &amp;nbsp;
]
---

name: filter
class: title1

조건에 맞는 데이터만 추출하기

---
&lt;br&gt;&lt;br&gt;
### .center[조건에 맞는 데이터만 추출하기]
&lt;br&gt;
&lt;img src="img/filter.png" width="600px" style="display: block; margin: auto;" /&gt;

---

#### 데이터 불러오기

```python
exam = pd.read_csv('csv_exam.csv')
exam
```

---



```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 4    5      2    25       80       65
## 5    6      2    50       89       98
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 14  15      4    75       56       78
## 15  16      4    58       98       65
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```


---


```python
# 1반인 경우만 추출
exam[exam['class'] == 1]
```

```
##    id  class  math  english  science
## 0   1      1    50       98       50
## 1   2      1    60       97       60
## 2   3      1    45       86       78
## 3   4      1    30       98       58
```

---

#### (1) `class` 추출


```python
exam['class']
```

```
## 0     1
## 1     1
## 2     1
## 3     1
## 4     2
## 5     2
## 6     2
## 7     2
## 8     3
## 9     3
## 10    3
## 11    3
## 12    4
## 13    4
## 14    4
## 15    4
## 16    5
## 17    5
## 18    5
## 19    5
## Name: class, dtype: int64
```
---

#### (2) `class`가 1인지 확인


```python
exam['class'] == 1
```

```
## 0      True
## 1      True
## 2      True
## 3      True
## 4     False
## 5     False
## 6     False
## 7     False
## 8     False
## 9     False
## 10    False
## 11    False
## 12    False
## 13    False
## 14    False
## 15    False
## 16    False
## 17    False
## 18    False
## 19    False
## Name: class, dtype: bool
```

---


#### (3) `class`가 1이면 추출


```python
exam[exam['class'] == 1]
```

```
##    id  class  math  english  science
## 0   1      1    50       98       50
## 1   2      1    60       97       60
## 2   3      1    45       86       78
## 3   4      1    30       98       58
```


---


```python
# 2반인 경우만 추출
exam[exam['class'] == 2]
```

```
##    id  class  math  english  science
## 4   5      2    25       80       65
## 5   6      2    50       89       98
## 6   7      2    80       90       45
## 7   8      2    90       78       25
```

---


```python
# 1반이 아닌 경우
exam[exam['class'] != 1]
```

```
##     id  class  math  english  science
## 4    5      2    25       80       65
## 5    6      2    50       89       98
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 14  15      4    75       56       78
## 15  16      4    58       98       65
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---


```python
# 2반이 아닌 경우
exam[exam['class'] != 2]
```

```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 14  15      4    75       56       78
## 15  16      4    58       98       65
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---

#### 초과, 미만, 이상, 이하 조건 걸기


```python
# 수학 점수가 50점을 초과한 경우
exam[exam['math'] &gt; 50]
```

```
##     id  class  math  english  science
## 1    2      1    60       97       60
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 10  11      3    65       65       65
## 14  15      4    75       56       78
## 15  16      4    58       98       65
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---


```python
# 수학 점수가 50점 미만인 경우
exam[exam['math'] &lt; 50]
```

```
##     id  class  math  english  science
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 4    5      2    25       80       65
## 8    9      3    20       98       15
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
```

---


```python
# 영어 점수가 80점 이상인 경우
exam[exam['english'] &gt;= 80]
```

```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 4    5      2    25       80       65
## 5    6      2    50       89       98
## 6    7      2    80       90       45
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 15  16      4    58       98       65
## 19  20      5    78       83       58
```

---


```python
# 영어 점수가 80점 이하인 경우
exam[exam['english'] &lt;= 80]
```

```
##     id  class  math  english  science
## 4    5      2    25       80       65
## 7    8      2    90       78       25
## 10  11      3    65       65       65
## 14  15      4    75       56       78
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
```


---

#### 여러 조건을 충족하는 행 추출하기


```python
# 1반인 경우
exam[exam['class'] == 1]
```

```
##    id  class  math  english  science
## 0   1      1    50       98       50
## 1   2      1    60       97       60
## 2   3      1    45       86       78
## 3   4      1    30       98       58
```

--


```python
# 1반 이면서 수학 점수가 50점 이상인 경우
exam[(exam['class'] == 1) &amp; (exam['math'] &gt;= 50)]
```

```
##    id  class  math  english  science
## 0   1      1    50       98       50
## 1   2      1    60       97       60
```

---


```python
# 2반 이면서 영어 점수가 80점 이상인 경우
exam[(exam['class'] == 2) &amp; (exam['english'] &gt;= 80)]
```

```
##    id  class  math  english  science
## 4   5      2    25       80       65
## 5   6      2    50       89       98
## 6   7      2    80       90       45
```

---

#### 여러 조건 중 하나 이상 충족하는 행 추출하기


```python
# 수학 점수가 90점 이상이거나 영어 점수가 90점 이상인 경우
exam[(exam['math'] &gt;= 90) | (exam['english'] &gt;= 90)]
```

```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 3    4      1    30       98       58
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 12  13      4    46       98       65
## 15  16      4    58       98       65
```

---


```python
# 영어 점수가 90점 미만이거나 과학점수가 50점 미만인 경우
exam[(exam['english'] &lt; 90) | (exam['science'] &lt; 50)]
```

```
##     id  class  math  english  science
## 2    3      1    45       86       78
## 4    5      2    25       80       65
## 5    6      2    50       89       98
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 13  14      4    48       87       12
## 14  15      4    75       56       78
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---

#### 목록에 해당되는 행 추출하기


```python
# 1, 3, 5반 추출
exam[(exam['class'] == 1) | (exam['class'] == 3) | (exam['class'] == 5)] 
```

```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---

#### 목록에 해당되는 행 추출하기


```python
exam[exam['class'].isin([1, 3, 5])]
```

```
##     id  class  math  english  science
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 8    9      3    20       98       15
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 11  12      3    45       85       32
## 16  17      5    65       68       98
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 19  20      5    78       83       58
```

---
- `df.isin[]`


```python
exam['class'].isin([1, 3, 5])
```

```
## 0      True
## 1      True
## 2      True
## 3      True
## 4     False
## 5     False
## 6     False
## 7     False
## 8      True
## 9      True
## 10     True
## 11     True
## 12    False
## 13    False
## 14    False
## 15    False
## 16     True
## 17     True
## 18     True
## 19     True
## Name: class, dtype: bool
```

---

#### 추출한 행으로 데이터 만들기


```python
class1 = exam[exam['class'] == 1]  # class가 1인 행 추출, class1에 할당
class2 = exam[exam['class'] == 2]  # class가 2인 행 추출, class2에 할당
```



```python
sum(class1['math'])/4              # 1반 수학 점수 평균 구하기
```

```
## 46.25
```

```python
sum(class2['math'])/4              # 1반 수학 점수 평균 구하기
```

```
## 61.25
```

---

#### `len()` 활용하기


```python
len(exam)                        # 전체 학생 수 구하기
```

```
## 20
```
--


```python
sum(exam['math'])/len(exam)      # 전체 수학 평균 구하기
```

```
## 57.45
```

--


```python
sum(class1['math'])/len(class1)  # 1반 수학 점수 평균 구하기
```

```
## 46.25
```

```python
sum(class2['math'])/len(class2)  # 2반 수학 점수 평균 구하기
```

```
## 61.25
```

---

#### `df.mean()` 활용하기


```python
exam['math'].mean()   # 전체 수학 평균 구하기
```

```
## 57.45
```

--


```python
class1['math'].mean()  # 1반 수학 평균 구하기
```

```
## 46.25
```

```python
class2['math'].mean()  # 2반 수학 평균 구하기
```

```
## 61.25
```


---


#### Python에서 사용하는 기호들

.left[

논리 연산자  | &amp;nbsp; &amp;nbsp; 기능
:-----------:|---
&lt;            | &amp;nbsp; &amp;nbsp; 작다
&lt;=           | &amp;nbsp; &amp;nbsp; 작거나 같다 &amp;nbsp;
&gt;            | &amp;nbsp; &amp;nbsp; 크다
&gt;=           | &amp;nbsp; &amp;nbsp; 크거나 같다
==           | &amp;nbsp; &amp;nbsp; 같다
!=           | &amp;nbsp; &amp;nbsp; 같지 않다
&amp;            | &amp;nbsp; &amp;nbsp; 그리고
│            | &amp;nbsp; &amp;nbsp; 또는


&lt;svg viewBox="0 0 352 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  [ comment ]  &lt;path d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"&gt;&lt;/path&gt;&lt;/svg&gt; `df.isin()` : 매칭 확인

]

---
### 혼자서 해보기

**`mpg` 데이터를 이용해서 분석 문제를 해결해 보세요.**

Q1. 자동차 배기량에 따라 고속도로 연비가 다른지 알아보려고 합니다. `displ`(배기량)이 `4` 이하인 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;자동차와 `5` 이상인 자동차 중 어떤 자동차의 `hwy`(고속도로 연비)가 평균적으로 더 높은지 알아보세요.

Q2. 자동차 제조 회사에 따라 도시 연비가 다른지 알아보려고 합니다. `'audi'`와 `'toyota'` 중 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;어느 `manufacturer`(자동차 제조 회사)의 `cty`(도시 연비)가 평균적으로 더 높은지 알아보세요.

Q3. `'chevrolet'`, `'ford'`, `'honda'` 자동차의 고속도로 연비 평균을 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 이 회사들의 자동차를 추출한 뒤 `hwy` 전체 평균을 구해보세요.

---

Q1. 자동차 배기량에 따라 고속도로 연비가 다른지 알아보려고 합니다. `displ`(배기량)이 `4` 이하인 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;자동차와 `5` 이상인 자동차 중 어떤 자동차의 `hwy`(고속도로 연비)가 평균적으로 더 높은지 알아보세요.


```python
mpg = pd.read_csv('data_mpg.csv')  # mpg 데이터 불러오기

mpg_a = mpg[mpg['displ'] &lt;= 4]    # displ 4 이하 추출
mpg_b = mpg[mpg['displ'] &gt;= 5]    # displ 5 이상 추출
```


```python
mpg_a['displ'].mean()  # displ 4 이하 hwy 평균
```

```
## 2.7527607361963193
```

```python
mpg_b['displ'].mean()  # displ 5 이상 hwy 평균
```

```
## 5.578947368421052
```

---

Q2. 자동차 제조 회사에 따라 도시 연비가 다른지 알아보려고 합니다. `'audi'`와 `'toyota'` 중 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;어느 `manufacturer`(자동차 제조 회사)의 `cty`(도시 연비)가 평균적으로 더 높은지 알아보세요.

```python
mpg_audi   = mpg[mpg['manufacturer'] == 'audi']    # audi 추출
mpg_toyota = mpg[mpg['manufacturer'] == 'toyota']  # toyota 추출

mpg_audi['cty'].mean()    # audi의 cty 평균
```

```
## 17.61111111111111
```

```python
mpg_toyota['cty'].mean()  # toyota의 cty 평균
```

```
## 18.529411764705884
```

---

Q3. `'chevrolet'`, `'ford'`, `'honda'` 자동차의 고속도로 연비 평균을 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 이 회사들의 자동차를 추출한 뒤 `hwy` 전체 평균을 구해보세요.

```python
# manufacturer가 chevrolet, ford, honda에 해당하면 추출
mpg_new = mpg[mpg['manufacturer'].isin(['chevrolet', 'ford', 'honda'])]
mpg_new['hwy'].mean()
```

```
## 22.50943396226415
```

---

name: select
class: title1

필요한 변수만 추출하기

---

&lt;br&gt;
### .center[필요한 변수만 추출하기]

&lt;br&gt;
&lt;img src="img/select.png" width="600px" style="display: block; margin: auto;" /&gt;

---


```python
exam['math']  # math 추출
```

```
## 0     50
## 1     60
## 2     45
## 3     30
## 4     25
## 5     50
## 6     80
## 7     90
## 8     20
## 9     50
## 10    65
## 11    45
## 12    46
## 13    48
## 14    75
## 15    58
## 16    65
## 17    80
## 18    89
## 19    78
## Name: math, dtype: int64
```

---


```python
exam[['math']]  # math 추출 - 데이터 프레임 형태로
```

```
##     math
## 0     50
## 1     60
## 2     45
## 3     30
## 4     25
## 5     50
## 6     80
## 7     90
## 8     20
## 9     50
## 10    65
## 11    45
## 12    46
## 13    48
## 14    75
## 15    58
## 16    65
## 17    80
## 18    89
## 19    78
```


---

#### 여러 변수 추출하기


```python
exam[['class', 'math', 'english']]  # class, math, english 변수 추출
```

```
##     class  math  english
## 0       1    50       98
## 1       1    60       97
## 2       1    45       86
## 3       1    30       98
## 4       2    25       80
## 5       2    50       89
## 6       2    80       90
## 7       2    90       78
## 8       3    20       98
## 9       3    50       98
## 10      3    65       65
## 11      3    45       85
## 12      4    46       98
## 13      4    48       87
## 14      4    75       56
## 15      4    58       98
## 16      5    65       68
## 17      5    80       78
## 18      5    89       68
## 19      5    78       83
```

---

#### 변수 제외하기


```python
exam.drop(columns = 'math')  # math 제외
```

```
##     id  class  english  science
## 0    1      1       98       50
## 1    2      1       97       60
## 2    3      1       86       78
## 3    4      1       98       58
## 4    5      2       80       65
## 5    6      2       89       98
## 6    7      2       90       45
## 7    8      2       78       25
## 8    9      3       98       15
## 9   10      3       98       45
## 10  11      3       65       65
## 11  12      3       85       32
## 12  13      4       98       65
## 13  14      4       87       12
## 14  15      4       56       78
## 15  16      4       98       65
## 16  17      5       68       98
## 17  18      5       78       90
## 18  19      5       68       87
## 19  20      5       83       58
```

---

#### 변수 제외하기


```python
exam.drop(columns = ['math', 'english'])  # math, english 제외
```

```
##     id  class  science
## 0    1      1       50
## 1    2      1       60
## 2    3      1       78
## 3    4      1       58
## 4    5      2       65
## 5    6      2       98
## 6    7      2       45
## 7    8      2       25
## 8    9      3       15
## 9   10      3       45
## 10  11      3       65
## 11  12      3       32
## 12  13      4       65
## 13  14      4       12
## 14  15      4       78
## 15  16      4       65
## 16  17      5       98
## 17  18      5       90
## 18  19      5       87
## 19  20      5       58
```

---


#### 행, 열 동시 추출하기


```python
# class가 1인 행만 추출한 다음 english 추출
exam[exam['class'] == 1]['english']
```

```
## 0    98
## 1    97
## 2    86
## 3    98
## Name: english, dtype: int64
```

---


##### Q. 2반의 수학 점수 추출

--

```python
exam[exam['class'] == 2]['math']
```

```
## 4    25
## 5    50
## 6    80
## 7    90
## Name: math, dtype: int64
```

--

##### Q. 2반의 수학 점수 평균


--


```python
exam[exam['class'] == 2]['math'].mean()
```

```
## 61.25
```



---

### 혼자서 해보기

`mpg` 데이터를 이용해서 분석 문제를 해결해보세요.

Q1. `mpg` 데이터는 11개 변수로 구성되어 있습니다. 이 중 일부만 추출해서 분석에 활용하려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `mpg` 데이터에서 `class`(자동차 종류), `cty`(도시 연비) 변수를 추출해 새로운 데이터를 만드세요. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 새로 만든 데이터의 일부를 출력해서 두 변수로만 구성되어 있는지 확인하세요.

Q2. 자동차 종류에 따라 도시 연비가 다른지 알아보려고 합니다. 앞에서 추출한 데이터를 이용해서 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `class`(자동차 종류)가 `'suv'`인 자동차와 `'compact'`인 자동차 중 어떤 자동차의 `cty`(도시 연비) &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 평균이 더 높은지 알아보세요.

---

Q1. `mpg` 데이터는 11개 변수로 구성되어 있습니다. 이 중 일부만 추출해서 분석에 활용하려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `mpg` 데이터에서 `class`(자동차 종류), `cty`(도시 연비) 변수를 추출해 새로운 데이터를 만드세요. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 새로 만든 데이터의 일부를 출력해서 두 변수로만 구성되어 있는지 확인하세요.


```python
mpg = pd.read_csv('data_mpg.csv')  # mpg 데이터 불러오기

df = mpg[['class', 'cty']]         # class, cty 변수 추출
df.head()                          # df 일부 출력
```

```
##      class  cty
## 0  compact   18
## 1  compact   21
## 2  compact   20
## 3  compact   21
## 4  compact   16
```

---

Q2. 자동차 종류에 따라 도시 연비가 다른지 알아보려고 합니다. 앞에서 추출한 데이터를 이용해서 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `class`(자동차 종류)가 `'suv'`인 자동차와 `'compact'`인 자동차 중 어떤 자동차의 `cty`(도시 연비) &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 평균이 더 높은지 알아보세요.

##### 방법1

```python
df_suv = df[df['class'] == 'suv']          # class가 suv인 행 추출
df_compact = df[df['class'] == 'compact']  # class가 compact인 행 추출
```



```python
df_suv['cty'].mean()                       # suv의 cty 평균
```

```
## 13.5
```

```python
df_compact['cty'].mean()                   # compact의 cty 평균
```

```
## 20.127659574468087
```

---

Q2. 자동차 종류에 따라 도시 연비가 다른지 알아보려고 합니다. 앞에서 추출한 데이터를 이용해서 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `class`(자동차 종류)가 `'suv'`인 자동차와 `'compact'`인 자동차 중 어떤 자동차의 `cty`(도시 연비) &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 평균이 더 높은지 알아보세요.

##### 방법2

```python
df[df['class'] == 'suv']['cty'].mean()
```

```
## 13.5
```

```python
df[df['class'] == 'compact']['cty'].mean()
```

```
## 20.127659574468087
```



---

name: arrange
class: title1

순서대로 정렬하기

---
&lt;br&gt;
### .center[순서대로 정렬하기]

&lt;br&gt;

&lt;img src="img/arrange.png" width="600px" style="display: block; margin: auto;" /&gt;


---

#### 오름차순으로 정렬하기


```python
exam.sort_values('math')  # math 오름차순 정렬
```

```
##     id  class  math  english  science
## 8    9      3    20       98       15
## 4    5      2    25       80       65
## 3    4      1    30       98       58
## 2    3      1    45       86       78
## 11  12      3    45       85       32
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 0    1      1    50       98       50
## 9   10      3    50       98       45
## 5    6      2    50       89       98
## 15  16      4    58       98       65
## 1    2      1    60       97       60
## 10  11      3    65       65       65
## 16  17      5    65       68       98
## 14  15      4    75       56       78
## 19  20      5    78       83       58
## 6    7      2    80       90       45
## 17  18      5    80       78       90
## 18  19      5    89       68       87
## 7    8      2    90       78       25
```
---

#### 내림차순으로 정렬하기


```python
exam.sort_values('math', ascending = False)    # math 내림차순 정렬
```

```
##     id  class  math  english  science
## 7    8      2    90       78       25
## 18  19      5    89       68       87
## 17  18      5    80       78       90
## 6    7      2    80       90       45
## 19  20      5    78       83       58
## 14  15      4    75       56       78
## 16  17      5    65       68       98
## 10  11      3    65       65       65
## 1    2      1    60       97       60
## 15  16      4    58       98       65
## 9   10      3    50       98       45
## 5    6      2    50       89       98
## 0    1      1    50       98       50
## 13  14      4    48       87       12
## 12  13      4    46       98       65
## 11  12      3    45       85       32
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 4    5      2    25       80       65
## 8    9      3    20       98       15
```
---

#### 여러 기준으로 정렬하기


```python
exam.sort_values(['class', 'math'])  # class 및 math 오름차순 정렬
```

```
##     id  class  math  english  science
## 3    4      1    30       98       58
## 2    3      1    45       86       78
## 0    1      1    50       98       50
## 1    2      1    60       97       60
## 4    5      2    25       80       65
## 5    6      2    50       89       98
## 6    7      2    80       90       45
## 7    8      2    90       78       25
## 8    9      3    20       98       15
## 11  12      3    45       85       32
## 9   10      3    50       98       45
## 10  11      3    65       65       65
## 12  13      4    46       98       65
## 13  14      4    48       87       12
## 15  16      4    58       98       65
## 14  15      4    75       56       78
## 16  17      5    65       68       98
## 19  20      5    78       83       58
## 17  18      5    80       78       90
## 18  19      5    89       68       87
```

---

#### 여러 기준으로 정렬하기 - 정렬 순서 따로 정하기


```python
exam.sort_values(['class', 'math'], ascending = [True, False])  
```

```
##     id  class  math  english  science
## 1    2      1    60       97       60
## 0    1      1    50       98       50
## 2    3      1    45       86       78
## 3    4      1    30       98       58
## 7    8      2    90       78       25
## 6    7      2    80       90       45
## 5    6      2    50       89       98
## 4    5      2    25       80       65
## 10  11      3    65       65       65
## 9   10      3    50       98       45
## 11  12      3    45       85       32
## 8    9      3    20       98       15
## 14  15      4    75       56       78
## 15  16      4    58       98       65
## 13  14      4    48       87       12
## 12  13      4    46       98       65
## 18  19      5    89       68       87
## 17  18      5    80       78       90
## 19  20      5    78       83       58
## 16  17      5    65       68       98
```


---


### 혼자서 해보기

`mpg` 데이터를 이용해서 분석 문제를 해결해보세요.

Q. `'audi'`에서 생산한 자동차 중에 어떤 자동차 모델의 `hwy`(고속도로 연비)가 높은지 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `'audi'`에서 생산한 자동차 중 `hwy`가 1~5위에 해당하는 자동차의 데이터 출력하세요.


---

Q. `'audi'`에서 생산한 자동차 중에 어떤 자동차 모델의 `hwy`(고속도로 연비)가 높은지 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; `'audi'`에서 생산한 자동차 중 `hwy`가 1~5위에 해당하는 자동차의 데이터 출력하세요.


```python
mpg = pd.read_csv('data_mpg.csv')
```


```python
mpg[mpg['manufacturer'] == 'audi'].sort_values('hwy', ascending = False).head(5)
```

```
##   manufacturer       model  displ  year  cyl  ... drv cty  hwy  fl    class
## 2         audi          a4    2.0  2008    4  ...   f  20   31   p  compact
## 3         audi          a4    2.0  2008    4  ...   f  21   30   p  compact
## 0         audi          a4    1.8  1999    4  ...   f  18   29   p  compact
## 1         audi          a4    1.8  1999    4  ...   f  21   29   p  compact
## 9         audi  a4 quattro    2.0  2008    4  ...   4  20   28   p  compact
## 
## [5 rows x 11 columns]
```

.left[

```python
mpg[mpg['manufacturer'] == 'audi'] \
  .sort_values('hwy', ascending = False) \
  .head(5)   
```
]
.pull-right[

```python
# audi 추출
# hwy 내림차순 정렬
# 5행까지 출력
```

]

---


name: groupby_summarise
class: title1

집단별로 요약하기

---
&lt;br&gt;
### .center[집단별로 요약하기]

&lt;br&gt;

&lt;img src="img/groupby_summarise.png" width="600px" style="display: block; margin: auto;" /&gt;

---

#### 요약 통계량 구하기



```python
exam.agg(mean_math = ('math', 'mean'))  # math 평균 산출
```

```
##             math
## mean_math  57.45
```

---

#### 집단별 요약 통계량 구하기

```python
exam.groupby('class').agg(mean_math = ('math', 'mean'))  # class별 math 평균 산출
```

```
##        mean_math
## class           
## 1          46.25
## 2          61.25
## 3          45.00
## 4          56.75
## 5          78.00
```

--

.pull-left[

```python
exam.groupby('class') \
    .agg(mean_math = ('math', 'mean'))
```
]
.pull-right[

```python
# class별로 분리
# math 평균 산출
```

]

---


#### 여러 요약 통계량 한 번에 구하기

```python
exam.groupby('class').agg(mean_math   = ('math', 'mean'),    # class별로 분리
                          sum_math    = ('math', 'sum'),     # 수학 점수 평균
                          median_math = ('math', 'median'),  # 수학 점수 중앙값
                          n           = ('class', 'count'))  # 빈도: 학생 수
```

```
##        mean_math  sum_math  median_math  n
## class                                     
## 1          46.25       185         47.5  4
## 2          61.25       245         65.0  4
## 3          45.00       180         47.5  4
## 4          56.75       227         53.0  4
## 5          78.00       312         79.0  4
```

---

#### 자주 사용하는 요약 통계량 함수

.left[
&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;함수    |&amp;nbsp; &amp;nbsp; &amp;nbsp; 의미
--------|-----
&amp;nbsp; &amp;nbsp; mean()  &amp;nbsp;|&amp;nbsp; &amp;nbsp; 평균&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; std()   &amp;nbsp;|&amp;nbsp; &amp;nbsp; 표준편차&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; sum()   &amp;nbsp;|&amp;nbsp; &amp;nbsp; 합계&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; median()&amp;nbsp;|&amp;nbsp; &amp;nbsp; 중앙값&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; min()   &amp;nbsp;|&amp;nbsp; &amp;nbsp; 최솟값&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; max()   &amp;nbsp;|&amp;nbsp; &amp;nbsp; 최댓값&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp; &amp;nbsp; count() &amp;nbsp;|&amp;nbsp; &amp;nbsp; 빈도&amp;nbsp;&amp;nbsp;&amp;nbsp;
]
---

#### 하위 집단별로 다시나누기

.scroll-box-24[




```python
mpg.groupby(['manufacturer', 'drv']).agg(mean_cty = ('cty', 'mean'))
```

```
##                    mean_cty
## manufacturer drv           
## audi         4    16.818182
##              f    18.857143
## chevrolet    4    12.500000
##              f    18.800000
##              r    14.100000
## dodge        4    12.000000
##              f    15.818182
## ford         4    13.307692
##              r    14.750000
## honda        f    24.444444
## hyundai      f    18.642857
## jeep         4    13.500000
## land rover   4    11.500000
## lincoln      r    11.333333
## mercury      4    13.250000
## nissan       4    13.750000
##              f    20.000000
## pontiac      f    17.000000
## subaru       4    19.285714
## toyota       4    14.933333
##              f    21.368421
## volkswagen   f    20.925926
```
]

---

#### reset_index()

```python
mpg.groupby(['manufacturer', 'drv']).agg(mean_cty = ('cty', 'mean')).reset_index()
```

```
##    manufacturer drv   mean_cty
## 0          audi   4  16.818182
## 1          audi   f  18.857143
## 2     chevrolet   4  12.500000
## 3     chevrolet   f  18.800000
## 4     chevrolet   r  14.100000
## 5         dodge   4  12.000000
## 6         dodge   f  15.818182
## 7          ford   4  13.307692
## 8          ford   r  14.750000
## 9         honda   f  24.444444
## 10      hyundai   f  18.642857
## 11         jeep   4  13.500000
## 12   land rover   4  11.500000
## 13      lincoln   r  11.333333
## 14      mercury   4  13.250000
## 15       nissan   4  13.750000
## 16       nissan   f  20.000000
## 17      pontiac   f  17.000000
## 18       subaru   4  19.285714
## 19       toyota   4  14.933333
## 20       toyota   f  21.368421
## 21   volkswagen   f  20.925926
```


---

### 혼자서 해보기

`mpg` 데이터를 이용해서 분석 문제를 해결해 보세요.

Q1. `mpg` 데이터의 `class`는 자동차를 특징에 따라 `'suv'`, `'compact'` 등 일곱 종류로 분류한 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 변수입니다. 어떤 차종의 연비가 높은지 비교해보려고 합니다. `class`별 `cty` 평균을 구해보세요.

Q2. 앞 문제의 출력 결과는 `class` 값 알파벳 순으로 정렬되어 있습니다. 어떤 차종의 도시 연비가 높은지 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 쉽게 알아볼 수 있도록 `cty` 평균이 높은 순으로 정렬하여 출력하세요.

Q3. 어떤 회사 자동차의 `hwy`(고속도로 연비)가 가장 높은지 알아보려고 합니다. `hwy` 평균이 가장 높은 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 회사 세 곳을 출력하세요.

Q4. 어떤 회사에서 `'compact'`(경차) 차종을 가장 많이 생산하는지 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 각 회사별 `'compact'` 차종 수를 내림차순으로 정렬해 출력하세요.

---

Q1. `mpg` 데이터의 `class`는 자동차를 특징에 따라 `'suv'`, `'compact'` 등 일곱 종류로 분류한 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 변수입니다. 어떤 차종의 연비가 높은지 비교해보려고 합니다. `class`별 `cty` 평균을 구해보세요.

```python
mpg = pd.read_csv('data_mpg.csv')
```

&lt;br-back-20&gt;

.pull-left[

```python
mpg.groupby('class') \
    .agg(mean_cty = ('cty', 'mean'))
```

```
##              mean_cty
## class                
## 2seater     15.400000
## compact     20.127660
## midsize     18.756098
## minivan     15.818182
## pickup      13.000000
## subcompact  20.371429
## suv         13.500000
```
]

.pull-right[

```python
# class별 분리
# cty 평균 구하기
```
]

---

Q2. 앞 문제의 출력 결과는 `class` 값 알파벳 순으로 정렬되어 있습니다. 어떤 차종의 도시 연비가 높은지 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 쉽게 알아볼 수 있도록 `cty` 평균이 높은 순으로 정렬하여 출력하세요.

.pull-left-60[

```python
mpg.groupby('class') \
  .agg(mean_cty = ('cty', 'mean')) \
  .sort_values('mean_cty', ascending = False)
```

```
##              mean_cty
## class                
## subcompact  20.371429
## compact     20.127660
## midsize     18.756098
## minivan     15.818182
## 2seater     15.400000
## suv         13.500000
## pickup      13.000000
```

]

.pull-right-40[

```python
# class별 분리
# cty 평균 구하기
# 내림차순 정렬하기
```
]


---

Q3. 어떤 회사 자동차의 `hwy`(고속도로 연비)가 가장 높은지 알아보려고 합니다. `hwy` 평균이 가장 높은 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 회사 세 곳을 출력하세요.


.pull-left-60[

```python
mpg.groupby('manufacturer') \
    .agg(mean_hwy = ('hwy', 'mean')) \
    .sort_values('mean_hwy', ascending = False) \
    .head(3)
```

```
##                mean_hwy
## manufacturer           
## honda         32.555556
## volkswagen    29.222222
## hyundai       26.857143
```

]
.pull-right-40[

```python
# manufacturer별 분리
# hwy 평균 구하기
# 내림차순 정렬하기
# 상위 3행 추출
```
]

---

Q4. 어떤 회사에서 `'compact'`(경차) 차종을 가장 많이 생산하는지 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 각 회사별 `'compact'` 차종 수를 내림차순으로 정렬해 출력하세요.

.pull-left-60[

```python
mpg[mpg['class'] == 'compact'] \
    .groupby('manufacturer') \
    .agg(n = ('manufacturer', 'count')) \
    .sort_values('n', ascending = False)
```

```
##                n
## manufacturer    
## audi          15
## volkswagen    14
## toyota        12
## subaru         4
## nissan         2
```

]
.pull-right-40[


```python
# compact 추출
# manufacturer별 분리
# 빈도 구하기
# 내림차순 정렬
```
]

---
Q4. 어떤 회사에서 `'compact'`(경차) 차종을 가장 많이 생산하는지 알아보려고 합니다. &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 각 회사별 `'compact'` 차종 수를 내림차순으로 정렬해 출력하세요.


```python
mpg[mpg['class'] == 'compact'].value_counts('manufacturer')
```

```
## manufacturer
## audi          15
## volkswagen    14
## toyota        12
## subaru         4
## nissan         2
## dtype: int64
```

---

class:title1

분석 도전

---

### 분석 도전

**`midwest` 데이터는 미국 동북중부 437개 지역의 인구통계 정보를 담고 있습니다. `data_midwest.csv`를 &lt;br&gt;이용해서 데이터 분석 문제를 해결해보세요.**

Q1. `popadults`는 해당 지역의 성인 인구, `poptotal`은 전체 인구를 나타냅니다. `midwest` 데이터에 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; '전체 인구 대비 미성년 인구 백분율' 변수를 추가하세요.

Q2. 미성년 인구 백분율이 가장 높은 상위 5개 `county`(지역)의 미성년 인구 백분율을 출력하세요.

Q3. 분류표의 기준에 따라 미성년 비율 등급 변수를 추가하고, 각 등급에 몇 개의 지역이 있는지 알아보세요.

분류  |기준
:------:|:----:
&amp;nbsp; &amp;nbsp; &amp;nbsp; large &amp;nbsp; &amp;nbsp; &amp;nbsp; | 40% 이상
&amp;nbsp; &amp;nbsp; &amp;nbsp; middle &amp;nbsp; &amp;nbsp; &amp;nbsp;| 30% ~ 40% 미만
&amp;nbsp;&amp;nbsp; &amp;nbsp;  small &amp;nbsp; &amp;nbsp; &amp;nbsp; | 30% 미만

Q4. `popasian`은 해당 지역의 아시아인 인구를 나타냅니다. '전체 인구 대비 아시아인 인구 백분율' 변수를 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 추가하고, 하위 10개 지역의 `state`(주), `county`(지역명), 아시아인 인구 백분율을 출력하세요.


---
Q1. `popadults`는 해당 지역의 성인 인구, `poptotal`은 전체 인구를 나타냅니다. `midwest` 데이터에 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; '전체 인구 대비 미성년 인구 백분율' 변수를 추가하세요.

```python
# midwest 불러오기
midwest = pd.read_csv('data_midwest.csv')
```



```python
# midwest에 백분율 변수 추가
midwest['ratio'] = (midwest['poptotal'] - midwest['popadults']) \
                  / midwest['poptotal']*100
```

--


```python
midwest['ratio'] = (1 - midwest['popadults'] / midwest['poptotal'])*100
```

---
Q2. 미성년 인구 백분율이 가장 높은 상위 5개 `county`(지역)의 미성년 인구 백분율을 출력하세요.

.pull-left-60[


```python
midwest.sort_values('ratio', ascending = False) \
       .head(5)[['county', 'ratio']]
      
```

```
##         county      ratio
## 230   ISABELLA  51.501172
## 404  MENOMINEE  50.591260
## 281     ATHENS  49.320727
## 247    MECOSTA  49.059183
## 154     MONROE  47.358182
```
]
.pull-right-40[

```python
# ratio 내림차순 정렬
# 상위 5행 추출, 변수 추출
```
]

---
Q3. 분류표의 기준에 따라 미성년 비율 등급 변수를 추가하고, 각 등급에 몇 개의 지역이 있는지 알아보세요.


분류  |기준
:------:|:----:
&amp;nbsp; &amp;nbsp; &amp;nbsp; large &amp;nbsp; &amp;nbsp; &amp;nbsp; | 40% 이상
&amp;nbsp; &amp;nbsp; &amp;nbsp; middle &amp;nbsp; &amp;nbsp; &amp;nbsp;| 30% ~ 40% 미만
&amp;nbsp;&amp;nbsp; &amp;nbsp;  small &amp;nbsp; &amp;nbsp; &amp;nbsp; | 30% 미만



```python
# 등급 변수 추가
midwest['grade'] = np.where(midwest['ratio'] &gt;= 40, 'large',
                   np.where(midwest['ratio'] &gt;= 30, 'middle', 'small'))

# 미성년 비율 등급 빈도표
midwest['grade'].value_counts()
```

```
## middle    396
## large      32
## small       9
## Name: grade, dtype: int64
```



---

Q4. `popasian`은 해당 지역의 아시아인 인구를 나타냅니다. '전체 인구 대비 아시아인 인구 백분율' 변수를 &lt;br&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 추가하고, 하위 10개 지역의 `state`(주), `county`(지역명), 아시아인 인구 백분율을 출력하세요.

```python
# 아시안 비율 변수 추가
midwest['ratio_asian'] = midwest['popasian']/midwest['poptotal']*100
```

&lt;br-back-20&gt;

.pull-left-60[


```python
midwest.sort_values('ratio_asian', ascending=True)\
       .head(10)[['state', 'county', 'ratio_asian']]
```

```
##     state     county  ratio_asian
## 404    WI  MENOMINEE     0.000000
## 105    IN     BENTON     0.010592
## 109    IN    CARROLL     0.015950
## 358    OH     VINTON     0.027032
## 390    WI       IRON     0.032504
## 85     IL      SCOTT     0.053154
## 112    IN       CLAY     0.060716
## 261    MI     OSCODA     0.063759
## 340    OH      PERRY     0.066546
## 73     IL      PIATT     0.070749
```

]
.pull-right-40[


```python
# 내림차순 정렬
# 상위 10행 추출, 변수 추출
```
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true,
"ratio": "16:10",
"navigation": {
"scroll": true
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
